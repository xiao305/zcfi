<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-about">
                <!-- 网站Logo和描述将通过配置动态生成 -->
                <a href="./" class="footer-logo" id="footerSiteLogo">
                    <!-- Logo将由JavaScript动态生成 -->
                </a>
                <p id="siteDescriptionFooter"></p>
                <!-- 社交媒体链接将通过配置动态生成 -->
                <div class="social-links" id="footerSocialLinks">
                    <!-- 社交链接将由JavaScript动态生成 -->
                </div>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">快速链接</h3>
                <!-- 快速链接将通过配置动态生成 -->
                <ul id="footerQuickLinks">
                    <!-- 链接将由JavaScript动态生成 -->
                </ul>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">法律声明</h3>
                <!-- 法律声明链接将通过配置动态生成 -->
                <ul id="footerLegalLinks">
                    <!-- 链接将由JavaScript动态生成 -->
                </ul>
            </div>
        </div>
        
        <div class="compliance">
            <!-- 版权信息将通过配置动态生成 -->
            <p id="copyrightText"></p>
            <!-- 合规声明链接将通过配置动态生成 -->
            <div class="compliance-links" id="complianceLinks">
                <!-- 链接将由JavaScript动态生成 -->
            </div>
        </div>
    </div>
</footer>

<!-- 页脚自己的配置加载和渲染逻辑 -->
<script>
// 页脚自治逻辑 - 自己负责从Gist获取配置并渲染自己
(function() {
    const CONFIG_GIST_ID = '983bb7371ddb439a2fcbfb4885e34d14';
    const CONFIG_RAW_URL = `https://gist.githubusercontent.com/xiao305/${CONFIG_GIST_ID}/raw/config.json`;
    
    // 等待DOM加载完成
    document.addEventListener('DOMContentLoaded', function() {
        // 延迟加载，确保页面稳定
        setTimeout(loadAndRenderFooter, 150);
    });
    
    async function loadAndRenderFooter() {
        console.log('页脚开始加载配置...');
        
        try {
            // 1. 从Gist加载网站配置
            const timestamp = new Date().getTime();
            const response = await fetch(`${CONFIG_RAW_URL}?t=${timestamp}`);
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const configData = await response.json();
            console.log('页脚配置加载成功:', configData);
            
            // 2. 渲染页脚
            renderFooter(configData);
            
        } catch (error) {
            console.error('页脚配置加载失败:', error);
            // 不显示任何内容，保持空白
            renderFooter({});
        }
    }
    
    // 渲染页脚
    function renderFooter(configData) {
        // 确保配置结构存在
        const siteConfig = configData.site || {};
        const footerConfig = configData.footer || {};
        
        // 更新页脚Logo
        const footerLogo = document.getElementById('footerSiteLogo');
        if (footerLogo) {
            if (siteConfig.name) {
                footerLogo.innerHTML = `${escapeHtml(siteConfig.name)}<span>.</span>cn`;
            } else {
                footerLogo.innerHTML = '';
            }
        }
        
        // 更新页脚描述
        const footerDesc = document.getElementById('siteDescriptionFooter');
        if (footerDesc) {
            if (footerConfig.description) {
                footerDesc.textContent = footerConfig.description;
            } else {
                footerDesc.textContent = '';
            }
        }
        
        // 更新版权信息
        const copyrightText = document.getElementById('copyrightText');
        if (copyrightText) {
            if (footerConfig.copyright) {
                copyrightText.textContent = footerConfig.copyright;
            } else {
                copyrightText.textContent = '';
            }
        }
        
        // 更新快速链接
        const quickLinksContainer = document.getElementById('footerQuickLinks');
        if (quickLinksContainer) {
            if (footerConfig.quickLinks && Array.isArray(footerConfig.quickLinks)) {
                const quickLinksHTML = footerConfig.quickLinks
                    .filter(link => link && link.name && link.url)
                    .map(link => 
                        `<li><a href="${escapeHtml(link.url)}">${escapeHtml(link.name)}</a></li>`
                    ).join('');
                quickLinksContainer.innerHTML = quickLinksHTML;
            } else {
                quickLinksContainer.innerHTML = '';
            }
        }
        
        // 更新法律声明链接
        const legalLinksContainer = document.getElementById('footerLegalLinks');
        if (legalLinksContainer) {
            if (footerConfig.legalLinks && Array.isArray(footerConfig.legalLinks)) {
                const legalLinksHTML = footerConfig.legalLinks
                    .filter(link => link && link.name && link.url)
                    .map(link => 
                        `<li><a href="${escapeHtml(link.url)}">${escapeHtml(link.name)}</a></li>`
                    ).join('');
                legalLinksContainer.innerHTML = legalLinksHTML;
            } else {
                legalLinksContainer.innerHTML = '';
            }
        }
        
        // 更新合规声明链接
        const complianceLinksContainer = document.getElementById('complianceLinks');
        if (complianceLinksContainer) {
            if (footerConfig.legalLinks && Array.isArray(footerConfig.legalLinks)) {
                const complianceLinksHTML = footerConfig.legalLinks
                    .filter(link => link && link.name && link.url)
                    .map(link => 
                        `<a href="${escapeHtml(link.url)}">${escapeHtml(link.name)}</a>`
                    ).join('');
                complianceLinksContainer.innerHTML = complianceLinksHTML;
            } else {
                complianceLinksContainer.innerHTML = '';
            }
        }
        
        // 更新社交媒体链接
        const socialLinksContainer = document.getElementById('footerSocialLinks');
        if (socialLinksContainer) {
            const socialLinks = footerConfig.social || {};
            let socialHTML = '';
            
            // GitHub链接
            if (socialLinks.github && socialLinks.github.trim() !== '' && socialLinks.github !== 'https://example.com') {
                socialHTML += `<a href="${escapeHtml(socialLinks.github)}" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github"></i></a>`;
            }
            
            // 微博链接
            if (socialLinks.weibo && socialLinks.weibo.trim() !== '' && socialLinks.weibo !== 'https://example.com') {
                socialHTML += `<a href="${escapeHtml(socialLinks.weibo)}" target="_blank" rel="noopener noreferrer" title="微博"><i class="fab fa-weibo"></i></a>`;
            }
            
            // 知乎链接
            if (socialLinks.zhihu && socialLinks.zhihu.trim() !== '' && socialLinks.zhihu !== 'https://example.com') {
                socialHTML += `<a href="${escapeHtml(socialLinks.zhihu)}" target="_blank" rel="noopener noreferrer" title="知乎"><i class="fab fa-zhihu"></i></a>`;
            }
            
            // LinkedIn链接
            if (socialLinks.linkedin && socialLinks.linkedin.trim() !== '' && socialLinks.linkedin !== 'https://example.com') {
                socialHTML += `<a href="${escapeHtml(socialLinks.linkedin)}" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin"></i></a>`;
            }
            
            socialLinksContainer.innerHTML = socialHTML;
        }
        
        console.log('页脚渲染完成');
    }
    
    // HTML转义函数
    function escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
})();
</script>
