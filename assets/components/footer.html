<footer>
    <div class="container" id="footer-container">
        <div class="footer-content">
            <div class="footer-about">
                <!-- 网站Logo和描述将通过配置动态生成 -->
                <a href="./" class="footer-logo" id="footerSiteLogo">zcfi<span>.</span>cn</a>
                <p id="siteDescriptionFooter">个人网站和作品展示平台</p>
                <!-- 社交媒体链接将通过配置动态生成 -->
                <div class="social-links" id="footerSocialLinks"></div>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">快速链接</h3>
                <!-- 快速链接将通过配置动态生成 -->
                <ul id="footerQuickLinks">
                    <li><a href="./">首页</a></li>
                    <li><a href="portfolio.html">作品集</a></li>
                    <li><a href="blog.html">博客</a></li>
                    <li><a href="contact.html">联系我</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">法律声明</h3>
                <!-- 法律声明链接将通过配置动态生成 -->
                <ul id="footerLegalLinks">
                    <li><a href="privacy.html">隐私政策</a></li>
                    <li><a href="terms.html">使用条款</a></li>
                    <li><a href="copyright.html">版权声明</a></li>
                </ul>
            </div>
        </div>
        
        <div class="compliance">
            <!-- 版权信息将通过配置动态生成 -->
            <p id="copyrightText">© 2026 zcfi.cn 版权所有</p>
            <!-- 合规声明链接将通过配置动态生成 -->
            <div class="compliance-links" id="complianceLinks">
                <a href="privacy.html">隐私政策</a>
                <a href="terms.html">使用条款</a>
                <a href="copyright.html">版权声明</a>
            </div>
        </div>
    </div>
</footer>

<script>
// 在DOM加载完成后初始化页脚
document.addEventListener('DOMContentLoaded', function() {
    // 检查是否已定义siteConfigLoader，如果没有则加载它
    if (typeof window.siteConfig === 'undefined') {
        const script = document.createElement('script');
        script.src = '../assets/js/config-loader.js';
        script.onload = function() {
            initFooter();
        };
        document.head.appendChild(script);
    } else {
        initFooter();
    }
});

function initFooter() {
    // 加载网站配置
    window.siteConfig.loadConfig().then(config => {
        // 更新页脚Logo
        const footerLogo = document.getElementById('footerSiteLogo');
        if (footerLogo && config.site) {
            footerLogo.innerHTML = `${config.site.name}<span>.</span>cn`;
        }
        
        // 更新页脚描述
        const footerDesc = document.getElementById('siteDescriptionFooter');
        if (footerDesc && config.footer) {
            footerDesc.textContent = config.footer.description || '个人网站和作品展示平台';
        }
        
        // 更新版权信息
        const copyrightText = document.getElementById('copyrightText');
        if (copyrightText && config.footer) {
            copyrightText.innerHTML = config.footer.copyright || '© 2026 zcfi.cn 版权所有';
        }
        
        // 更新快速链接
        const quickLinksContainer = document.getElementById('footerQuickLinks');
        if (quickLinksContainer && config.footer && config.footer.quickLinks) {
            const quickLinksHTML = config.footer.quickLinks.map(link => 
                `<li><a href="${link.url}">${link.name}</a></li>`
            ).join('');
            quickLinksContainer.innerHTML = quickLinksHTML;
        }
        
        // 更新法律声明链接
        const legalLinksContainer = document.getElementById('footerLegalLinks');
        if (legalLinksContainer && config.footer && config.footer.legalLinks) {
            const legalLinksHTML = config.footer.legalLinks.map(link => 
                `<li><a href="${link.url}">${link.name}</a></li>`
            ).join('');
            legalLinksContainer.innerHTML = legalLinksHTML;
        }
        
        // 更新合规声明链接 (通常与法律声明相同)
        const complianceLinksContainer = document.getElementById('complianceLinks');
        if (complianceLinksContainer && config.footer && config.footer.legalLinks) {
            const complianceLinksHTML = config.footer.legalLinks.map(link => 
                `<a href="${link.url}">${link.name}</a>`
            ).join('');
            complianceLinksContainer.innerHTML = complianceLinksHTML;
        }
        
        // 更新社交媒体链接
        const socialLinksContainer = document.getElementById('footerSocialLinks');
        if (socialLinksContainer && config.footer && config.footer.social) {
            const socialLinks = config.footer.social;
            const socialHTML = `
                ${socialLinks.github && socialLinks.github.trim() !== '' ? 
                    `<a href="${socialLinks.github}" target="_blank" rel="noopener noreferrer" title="GitHub">
                        <i class="fab fa-github"></i>
                    </a>` : ''}
                ${socialLinks.weibo && socialLinks.weibo.trim() !== '' ? 
                    `<a href="${socialLinks.weibo}" target="_blank" rel="noopener noreferrer" title="微博">
                        <i class="fab fa-weibo"></i>
                    </a>` : ''}
                ${socialLinks.zhihu && socialLinks.zhihu.trim() !== '' ? 
                    `<a href="${socialLinks.zhihu}" target="_blank" rel="noopener noreferrer" title="知乎">
                        <i class="fab fa-zhihu"></i>
                    </a>` : ''}
                ${socialLinks.linkedin && socialLinks.linkedin.trim() !== '' ? 
                    `<a href="${socialLinks.linkedin}" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>` : ''}
            `;
            socialLinksContainer.innerHTML = socialHTML;
        }
    }).catch(error => {
        console.error('加载页脚配置失败:', error);
        // 保持默认页脚
    });
}
</script>
