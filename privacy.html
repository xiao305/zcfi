<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>隐私政策 | zcfi.cn</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../favicon/favicon.svg">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
    <link rel="icon" type="image/x-icon" href="../favicon/favicon.ico">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css">
    
    <style>
        .loading-message {
            text-align: center;
            color: #777;
            padding: 40px;
            font-style: italic;
        }
        
        .error-message {
            text-align: center;
            color: #e74c3c;
            padding: 40px;
            background: #fdf2f2;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .last-updated {
            text-align: right;
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- 头部导航 -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="../index.html" class="logo">zcfi<span>.</span>cn</a>
                <ul class="nav-links">
                    <li><a href="../index.html">首页</a></li>
                    <!-- 已删除关于我导航 -->
                    <li><a href="../portfolio.html">作品集</a></li>
                    <li><a href="../blog.html">博客</a></li>
                    <li><a href="../contact.html">联系我</a></li>
                </ul>
                <div class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <main style="margin-top: 100px; padding: 80px 0;">
        <div class="container">
            <div class="section-title">
                <h2 id="pageTitle">隐私政策</h2>
                <p id="pageSubtitle">加载中...</p>
            </div>
            <div id="contentContainer" style="background: white; padding: 40px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.08);">
                <div class="loading-message">正在加载隐私政策内容...</div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="compliance">
                <p>© 2026 zcfi.cn 版权所有</p>
            </div>
        </div>
    </footer>

    <script>
        // 配置Gist信息
        const CONFIG_GIST_ID = '983bb7371ddb439a2fcbfb4885e34d14';
        const CONFIG_RAW_URL = `https://gist.githubusercontent.com/xiao305/${CONFIG_GIST_ID}/raw/config.json`;
        
        // 页面类型
        const PAGE_TYPE = 'privacy';
        
        document.addEventListener('DOMContentLoaded', function() {
            loadPageContent();
        });
        
        async function loadPageContent() {
            try {
                console.log('正在加载隐私政策内容...');
                const timestamp = new Date().getTime();
                const response = await fetch(`${CONFIG_RAW_URL}?t=${timestamp}`);
                
                if (!response.ok) {
                    showError('无法加载配置数据，请稍后重试');
                    return;
                }
                
                const configData = await response.json();
                
                // 检查隐私政策是否启用
                if (!configData[PAGE_TYPE] || !configData[PAGE_TYPE].enabled) {
                    showDisabledMessage();
                    return;
                }
                
                // 更新页面标题
                document.title = `${configData[PAGE_TYPE].title} | zcfi.cn`;
                document.getElementById('pageTitle').textContent = configData[PAGE_TYPE].title;
                
                // 显示最后更新时间
                if (configData[PAGE_TYPE].lastUpdated) {
                    const date = new Date(configData[PAGE_TYPE].lastUpdated);
                    const dateStr = date.toLocaleDateString('zh-CN', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    document.getElementById('pageSubtitle').innerHTML = `<i class="fas fa-history"></i> 最后更新: ${dateStr}`;
                }
                
                // 填充内容
                const contentContainer = document.getElementById('contentContainer');
                contentContainer.innerHTML = configData[PAGE_TYPE].content || '<p>暂无内容</p>';
                
                // 添加最后更新时间戳
                if (configData[PAGE_TYPE].lastUpdated) {
                    const lastUpdatedDiv = document.createElement('div');
                    lastUpdatedDiv.className = 'last-updated';
                    lastUpdatedDiv.innerHTML = `<p><i class="fas fa-clock"></i> 最后更新时间: ${configData[PAGE_TYPE].lastUpdated}</p>`;
                    contentContainer.appendChild(lastUpdatedDiv);
                }
                
            } catch (error) {
                console.error('加载内容失败:', error);
                showError('加载内容失败，请检查网络连接或稍后重试');
            }
        }
        
        function showError(message) {
            document.getElementById('pageTitle').textContent = '加载失败';
            document.getElementById('pageSubtitle').textContent = '';
            
            const contentContainer = document.getElementById('contentContainer');
            contentContainer.innerHTML = `
                <div class="error-message">
                    <p><i class="fas fa-exclamation-triangle"></i> ${message}</p>
                    <button onclick="loadPageContent()" style="margin-top: 15px; padding: 10px 20px; background: #4a6fa5; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        <i class="fas fa-redo"></i> 重新加载
                    </button>
                </div>
            `;
        }
        
        function showDisabledMessage() {
            document.getElementById('pageTitle').textContent = '页面不可用';
            document.getElementById('pageSubtitle').textContent = '';
            
            const contentContainer = document.getElementById('contentContainer');
            contentContainer.innerHTML = `
                <div class="error-message">
                    <p><i class="fas fa-eye-slash"></i> 该页面暂时不可用</p>
                    <p style="margin-top: 10px;">隐私政策页面当前已被管理员禁用。</p>
                    <a href="../index.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: #4a6fa5; color: white; border-radius: 5px; text-decoration: none;">
                        <i class="fas fa-home"></i> 返回首页
                    </a>
                </div>
            `;
        }
    </script>
</body>
</html>
