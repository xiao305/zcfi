<!DOCTYPE html>
<html>
<head>
    <title>API 测试</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>博客列表测试</h1>
    <div id="blogs">加载中...</div>
    
    <script>
        // 使用 fetch 的完整配置
        const API_URL = 'https://get-content-crrchyeckp.cn-hangzhou.fcapp.run';
        
        // 手动添加 Date 头
        const now = new Date().toUTCString();
        
        fetch(API_URL + '?type=blog', {
          method: 'GET',
          headers: {
            'Date': now,
            'Content-Type': 'application/json'
          }
        })
        .then(response => response.json())
        .then(data => {
          const container = document.getElementById('blogs');
          if (Array.isArray(data)) {
            container.innerHTML = `
              <p>成功加载 ${data.length} 篇文章：</p>
              <ul>
                ${data.map(item => 
                  `<li><strong>${item.title}</strong> (${item.date})<br>${item.excerpt}</li>`
                ).join('')}
              </ul>
            `;
          } else {
            container.innerHTML = `<p style="color:red;">数据格式错误</p>
              <pre>${JSON.stringify(data, null, 2)}</pre>`;
          }
        })
        .catch(error => {
          document.getElementById('blogs').innerHTML = 
            `<p style="color:red;">网络错误: ${error.message}</p>`;
        });
    </script>
</body>
</html>
