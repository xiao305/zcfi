<!DOCTYPE html>
<html>
<head>
    <title>API 测试</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>博客列表测试</h1>
    <div id="blogs">加载中...</div>
    
    <script>
        const API_URL = 'https://get-content-crrchyeckp.cn-hangzhou.fcapp.run?type=blog';
        
        fetch(API_URL, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => {
          console.log('Response status:', response.status);
          return response.text();
        })
        .then(text => {
          console.log('Raw response:', text);
          try {
            const data = JSON.parse(text);
            console.log('Parsed ', data);
            
            const container = document.getElementById('blogs');
            if (Array.isArray(data)) {
              container.innerHTML = `
                <p>成功加载 ${data.length} 篇文章：</p>
                <ul>
                  ${data.map(item => 
                    `<li><strong>${item.title}</strong> (${item.date})<br>${item.excerpt}</li>`
                  ).join('')}
                </ul>
              `;
            } else {
              container.innerHTML = `<p style="color:red;">数据格式错误：返回的不是数组</p>
                <pre>${JSON.stringify(data, null, 2)}</pre>`;
            }
          } catch (parseError) {
            document.getElementById('blogs').innerHTML = 
              `<p style="color:red;">JSON 解析失败：</p>
               <pre>${text}</pre>`;
          }
        })
        .catch(error => {
          document.getElementById('blogs').innerHTML = 
            `<p style="color:red;">网络错误: ${error.message}</p>`;
        });
    </script>
</body>
</html>
